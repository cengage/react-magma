---
title: 'Select Migration Guide'
---

import { LeadParagraph } from '../components/LeadParagraph';
import { Link } from 'gatsby';

<PageContent componentName="select_migration">

<LeadParagraph>

The `Select` component has been upgraded!

The original version of the React Magma <Link to="/api/legacy-select">Select</Link> was built upon [React Select by Jed Watson](https://react-select.com/home).
The components `Select`, `AsyncSelect`, `CreatableSelect`, and `AsyncCreatableSelect` have been moved to `react-magma-legacy-selects` and will no longer be maintained.

The new version includes both the <Link to="/api/select">Select</Link> (replacing the old `Select` and `AsyncSelect`) and <Link to="/api/Combobox">Combobox</Link> (replacing `CreateableSelect` and `AsyncCreatableSelect`) components, built upon [Downshift](https://www.downshift-js.com/).

We recommend migrating to the new components as soon as possible. The major differences in the new version are outlined here.

</LeadParagraph>

## Installing Downshift

`downshift` is a `peerDependency` of `react-magma-dom`. Install `downshift` using `npm i --save downshift@5.4.7`.

## Remove React Select

`react-select` is no longer needed as a `peerDependency` if you are only using the new components. Remove `react-select` from your `dependencies`.

## Options/Items

Both the `LegacySelect` and new `Select` component take an array of options. However the property name has changed from `options` in `LegacySelect` to `items` in the new `Select` component.

Each item in the `items` array can either be a `string` or an `object` with the shape `{item: string; label: string;}`, as shown in the <Link to="/api/select/#basic_usage">Basic Usage examples</Link>.
In the new component, you may also pass in a <Link to="/api/select/#custom_items">custom shape for your items</Link>, by passing in an additional prop named `itemToString`,
which is a function that returns the string representation of your `item` which will be applied as the label. The same formats apply to the `Combobox` component.

## Async

The `Select` and the `Combobox` no longer have separate components for asynchronous loading of options.

To create the equivalent of `LegacyAsyncCreatableSelect` you can pass in the new options to an <Link to="/api/combobox/#async">Async Combobox</Link> with the `isLoading` prop to indicate that the new options are loading.

To create the equivalent of the `LegacyAsyncSelect`, you would use the <Link to="/api/combobox/#async">Async Combobox</Link> component with the prop <Link to="/api/combobox/#disable_create_item">disableCreateItem</Link> in addition to `isLoading`.

## Events

The `onChange` prop from the `LegacySelect` has been replaced with the `onSelectedItemChange` prop in the upgraded version.

The `onMenuOpen` and `onMenuClose` props from the `LegacySelect` have been replaced with `onIsOpenChange`.

Additionally, two new event props, `onHighlightedIndexChange` and `onStateChange` are also available.

See the docs for information on <Link to="/api/select/#specific_state_changes">Specific State Changes</Link> and <Link to="/api/select/#generic_state_change">Generic State Change</Link>.

## Accessibility

New to the upgraded `Select` and `Combobox` components, are some new props to allow for <Link to="/api/select/#accessibility">customization of the screen-reader accessible messages</Link>.
The `getA11yStatusMessage` prop is used to indicate when one the following props are changed: `items`, `highlightedIndex`, `inputValue` or `isOpen`.

The `getA11ySelectionMessage` prop is used to indicate when an item has been selected.

## Custom Styles

New to the upgraded `Select` and `Combobox` components, is the ability to add <Link to="/api/select/#custom_styles">custom styles</Link> by passing CSS properties.

</PageContent>
